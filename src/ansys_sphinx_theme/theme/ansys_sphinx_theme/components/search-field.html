<form class="bd-search d-flex align-items-center" action="{{ pathto('search') }}" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" placeholder="{{ theme_search_bar_text }}" aria-label="{{ theme_search_bar_text }}" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>

<!-- Add this div to show the search results -->
<div id="results" class="results"></div>

<link href="{{ pathto('_static/css/fuse-search.css', 1) }}" rel="stylesheet" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>

{% set theme_static_search = theme_static_search | default({}) %}
{% set theme_limit = theme_static_search.limit | default(10) %}
{% set min_chars_for_search = theme_static_search.min_chars_for_search | default(1) %}
<script>
  var theme_static_search = JSON.parse('{{ theme_static_search | tojson | safe }}');
  var theme_limit = "{{ theme_limit }}";
  var min_chars_for_search = "{{ min_chars_for_search }}";
</script>

<script src="{{ pathto('_static/js/fuse_search.js', 1) }}"></script>

<script>
    // Fetch the data from search.json and initialize Fuse.js
    fetch('{{ pathto("search.json", 1) }}')
    .then(response => {
      if (!response.ok) {
        throw new Error('Network response was not ok ' + response.statusText);
      }
      return response.json();
    })
    .then(data => {
      initializeFuse(data);
    })
    .catch(error => {
      console.error('There was a problem with the fetch operation:', error);
    });
</script>

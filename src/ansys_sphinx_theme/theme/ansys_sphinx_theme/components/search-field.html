<!-- Debugging: html_theme_options = {{ html_theme_options }} -->
<form class="bd-search d-flex align-items-center"
 action="{{ pathto('search') }}"
 method="get">
  <div class="col-md-18">
    <input type="search" placeholder="Search" class="form-control" id="search-bar-input" autofocus />
    {% if theme_meilisearch.index_uids %}
    <select id="indexUidSelector" style="margin-left: 20px;" class="index-select">
      {% for index_uid, index_name in theme_meilisearch.index_uids.items() %}
      <option value="{{ index_uid }}">{{ index_name }}</option>
      {% endfor %}
    </select>
    {% endif %}
  </div>
  <script src="https://cdn.jsdelivr.net/npm/docs-searchbar.js@latest/dist/cdn/docs-searchbar.min.js"></script>
  {% if theme_meilisearch %}
  <script>
    let theSearchBar = docsSearchBar({
      hostUrl: "{{ theme_meilisearch.host }}" ,
      apiKey: "{{ theme_meilisearch.api_key }}" ,
      indexUid: 'pyansys-docs-all-public',
      inputSelector: '#search-bar-input',
      enableDarkMode: 'auto',
      debug: true // Set debug to true if you want to inspect the dropdown
    });
    document.getElementById('indexUidSelector').addEventListener('change', function() {
      theSearchBar.indexUid = this.value;
      index = client.index(this.value);
      theSearchBar.inputSelector = '#docs-searchbar-suggestion';
      });

      document.getElementById('docs-searchbar-suggestion').focus();
  </script>
  {% endif %}
</form>
